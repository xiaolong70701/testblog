{
  "hash": "41a5d58cecb38ccd02d1a20769ddfd30",
  "result": {
    "markdown": "---\ntitle: \"Desvendando erros: Entendendo mensagens de erro comuns em R\"\nsubtitle: \"Post publicado no blog da Curso-R. Esse post tem como objetivo listar alguns erros comuns quando programamos em R, e dicas de como resolvê-los!\"\nauthor: \"Beatriz Milz e Fernando Corrêa\"\ndate: 2021-03-29\ncategories:\n  - R\n  - Debug\nimage: featured-photo.jpeg\ntoc: true\n---\n\n\n\n\nLeia o post no blog da Curso-R: [acesse aqui!](https://blog.curso-r.com/posts/2021-03-29-desvendando-erros/)\n\n\n\n\n\nQuando estamos programando, é muito comum executar algum código e ele gerar um erro!\nAlgumas vezes é difícil entender as mensagens de erro para começar a buscar ajuda, e isso pode atrasar nossas tarefas (e também nos desanimar).\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![Ilustração por <a href='https://github.com/allisonhorst/stats-illustrations'>Allison Horst</a>](https://github.com/allisonhorst/stats-illustrations/blob/master/rstats-artwork/stormyr.gif?raw=true){fig-align='center' width=80%}\n:::\n:::\n\n\nPrincipalmente quando estamos iniciando a nossa jornada de aprendizagem de R, alguns erros podem ser mais frequentes.\nEsse post tem como objetivo listar alguns desses erros comuns, baseado na minha experiência aprendendo e ensinando R, e também respondendo dúvidas :)\n\nVamos então ler um pouco sobre alguns erros frequentes, e como resolvê-los?\nPrepara um café ou chá, e vamos lá!\n☕\n\n## Objeto não encontrado\n\nImagine que queremos calcular a média do orçamento dos filmes que fazem parte da base de dados sobre filmes do IMDB, e recebemos o seguinte erro:\n\n``` r\nmean(imdb$orcamento, na.rm = TRUE)\n#> Error in mean(imdb$orcamento, na.rm = TRUE): objeto 'imdb' não encontrado\n```\n\n<sup>Created on 2021-03-26 by the [reprex package](https://reprex.tidyverse.org) (v1.0.0)</sup>\n\nO R está dizendo para nós que não está encontrando o objeto `imdb`!\nComo podemos resolver esse erro?\nPrecisamos carregar esse objeto no nosso ambiente, para que ele esteja disponível para uso!\n\nPara isso, precisamos usar o sinal de atribuição: `<-`.\n\nNo exemplo abaixo, importamos o arquivo `imdb.csv` e salvamos essa base de dados no objeto `imdb`.\nDessa forma, não obtemos um erro quando tentamos calcular a média da mesma forma que fizemos anteriormente, pois o objeto será encontrado e o código conseguirá ser executado!\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nimdb <- readr::read_csv2(\"https://raw.githubusercontent.com/curso-r/202010-r4ds-1/master/dados/imdb2.csv\")\n\nmean(imdb$orcamento, na.rm = TRUE)\n## [1] 35237114\n```\n:::\n\n\n## Não foi possível encontrar a função \"...\"\n\nJá tentou executar um código e o retorno foi essa mensagem de erro?\n\n``` r\nglimpse(imdb)\n#> Error in glimpse(imdb): não foi possível encontrar a função \"glimpse\"\n```\n\n<sup>Created on 2021-03-26 by the [reprex package](https://reprex.tidyverse.org) (v1.0.0)</sup>\n\nIsso significa que o R não encontrou essa função.\nNo R, podemos instalar pacotes que contém funções para que a gente utilize nas nossas rotinas.\nPorém, é preciso carregar o pacote para que as funções do mesmo fiquem disponíveis para uso.\nPodemos carregar um pacote utilizando a função `library()`.\n\nNo exemplo abaixo, a função `glimpse()` faz parte do pacote `{dplyr}`.\nCarregando o pacote no início do código deixará todas as funções do pacote `{dplyr}` disponíveis para uso (incluindo a função que queremos usar):\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(dplyr)\nglimpse(imdb)\n## Rows: 3,713\n## Columns: 15\n## $ titulo         <chr> \"Avatar \", \"Pirates of the Caribbean: At World's End \",…\n## $ ano            <dbl> 2009, 2007, 2012, 2012, 2007, 2010, 2015, 2016, 2006, 2…\n## $ diretor        <chr> \"James Cameron\", \"Gore Verbinski\", \"Christopher Nolan\",…\n## $ duracao        <dbl> 178, 169, 164, 132, 156, 100, 141, 183, 169, 151, 150, …\n## $ cor            <chr> \"Color\", \"Color\", \"Color\", \"Color\", \"Color\", \"Color\", \"…\n## $ generos        <chr> \"Action|Adventure|Fantasy|Sci-Fi\", \"Action|Adventure|Fa…\n## $ pais           <chr> \"USA\", \"USA\", \"USA\", \"USA\", \"USA\", \"USA\", \"USA\", \"USA\",…\n## $ classificacao  <chr> \"A partir de 13 anos\", \"A partir de 13 anos\", \"A partir…\n## $ orcamento      <dbl> 237000000, 300000000, 250000000, 263700000, 258000000, …\n## $ receita        <dbl> 760505847, 309404152, 448130642, 73058679, 336530303, 2…\n## $ nota_imdb      <dbl> 7.9, 7.1, 8.5, 6.6, 6.2, 7.8, 7.5, 6.9, 6.1, 7.3, 6.5, …\n## $ likes_facebook <dbl> 33000, 0, 164000, 24000, 0, 29000, 118000, 197000, 0, 5…\n## $ ator_1         <chr> \"CCH Pounder\", \"Johnny Depp\", \"Tom Hardy\", \"Daryl Sabar…\n## $ ator_2         <chr> \"Joel David Moore\", \"Orlando Bloom\", \"Christian Bale\", …\n## $ ator_3         <chr> \"Wes Studi\", \"Jack Davenport\", \"Joseph Gordon-Levitt\", …\n```\n:::\n\n\nOutra forma de utilizar a função sem que seja necessário carregar o pacote, é utilizando o operador `::` (você pode ler mais sobre ele [neste capítulo do livro Zen do R](https://curso-r.github.io/zen-do-r/funcoes-deps.html#quatro-pontos)).\n\nLeia o código abaixo como: quero usar a função `glimpse()` do pacote `dplyr`\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndplyr::glimpse(imdb)\n## Rows: 3,713\n## Columns: 15\n## $ titulo         <chr> \"Avatar \", \"Pirates of the Caribbean: At World's End \",…\n## $ ano            <dbl> 2009, 2007, 2012, 2012, 2007, 2010, 2015, 2016, 2006, 2…\n## $ diretor        <chr> \"James Cameron\", \"Gore Verbinski\", \"Christopher Nolan\",…\n## $ duracao        <dbl> 178, 169, 164, 132, 156, 100, 141, 183, 169, 151, 150, …\n## $ cor            <chr> \"Color\", \"Color\", \"Color\", \"Color\", \"Color\", \"Color\", \"…\n## $ generos        <chr> \"Action|Adventure|Fantasy|Sci-Fi\", \"Action|Adventure|Fa…\n## $ pais           <chr> \"USA\", \"USA\", \"USA\", \"USA\", \"USA\", \"USA\", \"USA\", \"USA\",…\n## $ classificacao  <chr> \"A partir de 13 anos\", \"A partir de 13 anos\", \"A partir…\n## $ orcamento      <dbl> 237000000, 300000000, 250000000, 263700000, 258000000, …\n## $ receita        <dbl> 760505847, 309404152, 448130642, 73058679, 336530303, 2…\n## $ nota_imdb      <dbl> 7.9, 7.1, 8.5, 6.6, 6.2, 7.8, 7.5, 6.9, 6.1, 7.3, 6.5, …\n## $ likes_facebook <dbl> 33000, 0, 164000, 24000, 0, 29000, 118000, 197000, 0, 5…\n## $ ator_1         <chr> \"CCH Pounder\", \"Johnny Depp\", \"Tom Hardy\", \"Daryl Sabar…\n## $ ator_2         <chr> \"Joel David Moore\", \"Orlando Bloom\", \"Christian Bale\", …\n## $ ator_3         <chr> \"Wes Studi\", \"Jack Davenport\", \"Joseph Gordon-Levitt\", …\n```\n:::\n\n\n## Argumento não numérico para operador binário / non-numeric argument to binary operator\n\nDe toda a nossa lista de problemas, esse é aquele com a mensagem de erro mais complicada.\nVocê já tentou fazer algum cálculo como esse abaixo e o retorno foi essa mensagem de erro?\n\n``` r\nx <- \"a\"\nx+1\n#> Error in x + 1: argumento não-numérico para operador binário\n```\n\n<sup>Created on 2021-03-29 by the [reprex package](https://reprex.tidyverse.org) (v0.3.0)</sup>\n\nIsso é muito comum, principalmente quando estamos trabalhando em scripts mais longos, e essa mensagem de erro é o R tentando nos avisar que nós estamos passando um texto, no caso a letra \"a\", para uma operação que espera receber um número.\nNa verdade, o R é até um pouco mais preciso: a operação esperava um número e nós frustramos essa expectativa, por isso o erro menciona um \"argumento não-numérico\".\nNo caso nós tentamos fazer uma conta (a adição representada pelo símbolo `+`) usando um texto.\n\nO que podemos fazer quando esse erro aparece?\nMinha recomendação é examinar o seu código para verificar que tipo de argumento as suas operações matemáticas (por exemplo `+`, `-`, `*` e `^`) estão recebendo.\nMuito provavelmente algum desses argumentos não é um número...\n\n## Conflito de funções\n\n\n\n\n\nUm problema silencioso que pode acontecer é o conflito de funções.\nEsse tipo de erro é um pouco mais complicado de identificar pois a mensagem de erro causada por esse problema não é padronizada.\n\n**Mas o que é um conflito de funções?**\n\nO R permite que a gente instale e carregue diversos pacotes.\nE esses pacotes podem ter funções com nomes iguais.\n\nPor exemplo, o pacote `{dplyr}` possui uma função chamada `filter()`, assim como o pacote `{base}` também tem uma função com o mesmo nome (o `{base}` sempre está carregado quando iniciamos o R).\n\nQuando usamos uma função sem usar o operador `::`, o R vai buscar no ambiente a função com esse nome que foi carregada por último.\nEntão podemos usar uma função A quando queremos realmente usar a função B.\n\nExemplo: queremos filtrar os filmes do diretor Zack Snyder.\nObtemos esse erro dizendo que o objeto imdb não foi encontrado, porém o objeto está carregado!\n\n``` r\nfilter(imdb, diretor == \"Zack Snyder\")\n#> Error in as.ts(x): objeto 'imdb' não encontrado\n```\n\n<sup>Created on 2021-03-26 by the [reprex package](https://reprex.tidyverse.org) (v1.0.0)</sup>\n\nIsso acontece pois o R utilizou a função `filter()` do pacote `{base}`, e não a função `filter()` do pacote `{dplyr}`!\n\nUma forma de evitar esses erros de conflitos é utilizar o operador `::`, que foi citado anteriormente.\nAssim estamos falando explicitamente em qual pacote essa função está:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndplyr::filter(imdb, diretor == \"Zack Snyder\")\n## # A tibble: 7 × 15\n##   titulo         ano diretor duracao cor   generos pais  classificacao orcamento\n##   <chr>        <dbl> <chr>     <dbl> <chr> <chr>   <chr> <chr>             <dbl>\n## 1 Batman v Su…  2016 Zack S…     183 Color Action… USA   A partir de … 250000000\n## 2 Man of Stee…  2013 Zack S…     143 Color Action… USA   A partir de … 225000000\n## 3 Watchmen      2009 Zack S…     215 Color Action… USA   A partir de … 130000000\n## 4 Legend of t…  2010 Zack S…     101 Color Action… USA   Livre          80000000\n## 5 Sucker Punc…  2011 Zack S…     128 Color Action… USA   A partir de …  82000000\n## 6 300           2006 Zack S…     117 Color Action… USA   A partir de …  65000000\n## 7 Dawn of the…  2004 Zack S…     110 Color Action… USA   A partir de …  26000000\n## # … with 6 more variables: receita <dbl>, nota_imdb <dbl>,\n## #   likes_facebook <dbl>, ator_1 <chr>, ator_2 <chr>, ator_3 <chr>\n```\n:::\n\n\n## Não existe um pacote chamado ... / There is no package called ..\n\nQuando queremos carregar um pacote, e ele não está instalado, o erro gerado é esse:\n\n``` r\nlibrary(tidyverse)\n#> Error in library(tidyverse) : there is no package called ‘tidyverse’\n```\n\n<sup>Created on 2021-03-26 by the [reprex package](https://reprex.tidyverse.org) (v1.0.0)</sup>\n\nComo resolver?\nPrecisamos instalar o pacote!\n\nA forma mais comum de instalação de um pacote é através do CRAN, utilizando a função `install.packages()`:\n\n``` r\ninstall.packages(\"tidyverse\")\n```\n\nApós instalar o pacote, conseguiremos carregá-lo normalmente!\n\n``` r\nlibrary(tidyverse)\n#> ── Attaching packages ───── tidyverse 1.3.0 ──\n#> ✓ ggplot2 3.3.3     ✓ purrr   0.3.4\n#> ✓ tibble  3.1.0     ✓ dplyr   1.0.5\n#> ✓ tidyr   1.1.3     ✓ stringr 1.4.0\n#> ✓ readr   1.4.0     ✓ forcats 0.5.1\n#> ── Conflicts ──────── tidyverse_conflicts() ──\n#> x dplyr::filter() masks stats::filter()\n#> x dplyr::lag()    masks stats::lag()\n```\n\n## O pacote ... não está disponível para essa versão do R / Package '...' is not available for this version of R\n\nNesse exemplo, mostraremos um caso onde não é gerado um erro, e sim uma mensagem de aviso (*warning*).\nEntretanto, o código não executa como esperamos, e pode impossibilitar a execução das etapas seguintes dos scripts.\n\nImagine que queremos calcular a média da massa corporal dos Pinguins que fazem parte da base de dados sobre [Pinguins](https://cienciadedatos.github.io/dados/reference/pinguins.html), disponível no pacote {[dados](https://cienciadedatos.github.io/dados/)}.\n\n``` r\ninstall.packages(\"dados\")\n#> Warning: package 'dados' is not available for this version of R\n#> \n#> A version of this package for your version of R might be available elsewhere,\n#> see the ideas at\n#> https://cran.r-project.org/doc/manuals/r-patched/R-admin.html#Installing-packages\n```\n\n<sup>Created on 2021-03-26 by the [reprex package](https://reprex.tidyverse.org) (v1.0.0)</sup>\n\nEssa mensagem acontece quando queremos instalar um pacote que não está disponível no CRAN.\nO que eu recomendo, neste caso, é buscar o repositório no GitHub do pacote desejado.\n\nNo caso do pacote que estamos mostrando neste exemplo, [este é o link do repositório](https://github.com/cienciadedatos/dados).\n\nCaso queira instalar o pacote através do GitHub, devemos utilizar a função `install_github()` do pacote `{remotes}`.\nComo argumento, devemos informar a organização ou pessoa a quem este repositório \"pertence\", e o nome do repositório: `\"nome_da_organizacao/nome_do_repositorio\"`.\nNo caso do pacote `{dados}`, a organização é [cienciadedatos](https://github.com/cienciadedatos), e o repositório é chamado de [dados](https://github.com/cienciadedatos/dados).\nPortanto, para instalar esse pacote, devemos executar o código a seguir:\n\n``` r\nremotes::install_github(\"cienciadedatos/dados\")\n```\n\nAgora conseguimos utilizar funções e bases de dados do pacote `dados`:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(dados)\nmean(pinguins$massa_corporal, na.rm = TRUE)\n## [1] 4201.754\n```\n:::\n\n\n## O arquivo ... não existe no diretório de trabalho atual / ... does not exist in current working directory\n\nE quando queremos importar uma base de dados (ou outro arquivo) para trabalhar no R, e recebemos essa mensagem?\n\n``` r\nimdb <- readr::read_csv2(\"imdb2.csv\")\n#> i Using ',' as decimal and '.' as grouping mark. Use `read_delim()` for more control.\n#> Error: 'imdb2.csv' does not exist in current working directory ('C:/Users/seu_usuario/Documents').\n```\n\n<sup>Created on 2021-03-29 by the [reprex package](https://reprex.tidyverse.org) (v0.3.0)</sup>\n\nO R está informando que não encontrou o arquivo que a gente deseja importar.\nA maior parte das vezes quando esse erro acontece é por que 1) esse arquivo não existe no nosso computador, ou 2) estamos indicando o caminho incorreto até o arquivo.\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![Ilustração sobre projetos no RStudio, por <a href='https://github.com/allisonhorst/stats-illustrations'>Allison Horst</a>](https://github.com/allisonhorst/stats-illustrations/blob/master/rstats-artwork/cracked_setwd.png?raw=true){fig-align='center' width=80%}\n:::\n:::\n\n\nVamos considerar que já sabemos que o arquivo existe no computador, e trabalhar na resolução da segunda opção: precisamos corrigir o caminho até o arquivo.\nÉ muito mais fácil lidar com isso quando trabalhamos com projetos no RStudio (`.Rproj`).\nRecomendo muito ler [desse capítulo do livro Zen do R](https://curso-r.github.io/zen-do-r/rproj-dir.html#diret%C3%B3rio-de-trabalho), pois fala bastante sobre as vantagens dessa abordagem.\n\nQuando trabalhamos com projetos no RStudio (`.Rproj`), os caminhos são relativos à pasta raiz do projeto.\nRecomendo adicionar dentro do seu projeto o arquivo que deseja abrir.\nE para descobrir o caminho, existe uma super dica: o RStudio nos ajuda a navegar nos arquivos presentes no nosso projeto.\nÉ necessário escrever duas aspas `\"\"`, posicionar o mouse entre elas (isso é, clicando entre as suas aspas como se a gente fosse escrever algo dentro delas), e apertar a tecla TAB do teclado.\nO RStudio abrirá janelinha que possibilitará que a gente navegue nos arquivos do nosso projeto dessa forma.\n\n\n::: {.cell layout-align=\"center\"}\n\n:::\n\n\nDescobrindo o caminho correto, podemos importar a base sem que aquele erro seja gerado!\n\n``` r\nimdb <- readr::read_csv2(\"dados/imdb2.csv\")\n#> ℹ Using ',' as decimal and '.' as grouping mark. Use `read_delim()` for more control.\n#> \n#> ── Column specification ────────────────────────────────────────────────────────\n#> cols(\n#>   titulo = col_character(),\n#>   ano = col_double(),\n#>   diretor = col_character(),\n#>   duracao = col_double(),\n#>   cor = col_character(),\n#>   generos = col_character(),\n#>   pais = col_character(),\n#>   classificacao = col_character(),\n#>   orcamento = col_double(),\n#>   receita = col_double(),\n#>   nota_imdb = col_double(),\n#>   likes_facebook = col_double(),\n#>   ator_1 = col_character(),\n#>   ator_2 = col_character(),\n#>   ator_3 = col_character()\n#> )\n```\n\n<sup>Created on 2021-03-26 by the [reprex package](https://reprex.tidyverse.org) (v1.0.0)</sup>\n\n## Conclusão\n\nEspero que essas dicas sejam úteis para você resolver os erros no futuro, e você seja mais feliz enquanto escreve seus códigos em R!\nE caso ainda tenha dúvidas, recomendo perguntar lá no [Fórum Discourse da Curso-R](https://discourse.curso-r.com/)!\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![Ilustração por <a href='https://github.com/allisonhorst/stats-illustrations'>Allison Horst</a>](https://github.com/allisonhorst/stats-illustrations/blob/master/rstats-artwork/heartyr.gif?raw=true){fig-align='center' width=80%}\n:::\n:::\n\n\n## Gostou? Quer saber mais?\n\nSe você quiser aprender um pouco mais sobre R em geral, dê uma olhada nos [Cursos da Curso-R](https://curso-r.com/#portfolio) e aproveite!\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}